{
  "name": "vitesse-lite-py",
  "private": true,
  "version": "1.0.0",
  "description": "基于pywebview和vitesse-lite框架，构建macOS和windows平台的客户端。",
  "author": "Marlene",
  "scripts": {
    "initComments": "清空缓存，配置环境",
    "init": "npm install -D shx && npm run clean && npm install && npm run initInstall",
    "clean": "shx rm -rf build node_modules core/pyenv package-lock.json gui/node_modules gui/package-lock.json",
    "initInstall": "run-script-os",
    "initInstall:macos": "npm install --prefix ./gui && python3 -m venv core/pyenv && ./core/pyenv/bin/pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r ./core/requirements.txt",
    "initInstall:windows": "npm install --prefix .\\gui && python -m venv core\\pyenv\\pyenv && .\\core\\pyenv\\pyenv\\Scripts\\pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r .\\core\\requirements.txt && shx rm -rf core\\pyenv\\pyenvCEF && python -m venv core\\pyenv\\pyenvCEF && .\\core\\pyenv\\pyenvCEF\\Scripts\\pip install -i https://pypi.tuna.tsinghua.edu.cn/simple -r .\\core\\requirements.txt && .\\core\\pyenv\\pyenvCEF\\Scripts\\pip install -i https://pypi.tuna.tsinghua.edu.cn/simple cefpython3",
    "startComments": "开发环境",
    "start": "run-p dev startos",
    "dev": "npm run dev --prefix ./gui",
    "startos": "run-script-os",
    "startos:macos": "nodemon --config ./core/nodemon.json --exec ./core/pyenv/bin/python -X dev ./main.py",
    "startos:windows": "nodemon --config .\\core\\nodemon.json --exec .\\core\\pyenv\\pyenv\\Scripts\\python -X dev .\\main.py",
    "startcefComments": "开发环境-cef模式",
    "start:cef": "run-p dev startcef",
    "startcef": "nodemon --config .\\core\\nodemon.json --exec .\\core\\pyenv\\pyenvCEF\\Scripts\\python -X dev .\\main.py --cef",
    "preComments": "预打包（带日志输出）",
    "pre": "shx rm -rf build && npm run build --prefix ./gui && run-script-os",
    "pre:macos": "python3 core/spec/getSpec.py --mac && ./core/pyenv/bin/pyinstaller --clean ./core/spec/macos-pre.spec",
    "pre:windows": "python core\\spec\\getSpec.py && .\\core\\pyenv\\pyenv\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-pre.spec",
    "precefComments": "预打包-cef模式",
    "pre:cef": "python core\\spec\\getSpec.py && shx rm -rf buildCEF && npm run build --prefix ./gui && .\\core\\pyenv\\pyenvCEF\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-pre-cef.spec && shx mv .\\build\\windows-pre-cef .\\buildCEF\\windows-pre-cef",
    "prefolderComments": "预打包-文件夹模式",
    "pre:folder": "python core\\spec\\getSpec.py && shx rm -rf build && npm run build --prefix ./gui && .\\core\\pyenv\\pyenv\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-folder-pre.spec",
    "prefoldercefComments": "预打包-cef模式-文件夹模式",
    "pre:folder:cef": "python core\\spec\\getSpec.py && shx rm -rf buildCEF && npm run build --prefix ./gui && .\\core\\pyenv\\pyenvCEF\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-folder-pre-cef.spec && shx mv .\\build\\windows-folder-pre-cef .\\buildCEF\\windows-folder-pre-cef",
    "buildComments": "正式打包",
    "build": "shx rm -rf build && npm run build --prefix ./gui && run-script-os",
    "build:macos": "python3 core/spec/getSpec.py --mac && ./core/pyenv/bin/pyinstaller --clean ./core/spec/macos.spec",
    "build:windows": "python core\\spec\\getSpec.py && .\\core\\pyenv\\pyenv\\Scripts\\pyinstaller --clean .\\core\\spec\\windows.spec",
    "buildcefComments": "正式打包-cef模式",
    "build:cef": "python core\\spec\\getSpec.py && shx rm -rf buildCEF && npm run build --prefix ./gui && .\\core\\pyenv\\pyenvCEF\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-cef.spec && shx mv .\\build\\windows-cef .\\buildCEF\\windows-cef",
    "buildfolderComments": "正式打包-文件夹模式",
    "build:folder": "python core\\spec\\getSpec.py && shx rm -rf build && npm run build --prefix ./gui && .\\core\\pyenv\\pyenv\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-folder.spec",
    "buildfoldercefComments": "正式打包-cef模式-文件夹模式",
    "build:folder:cef": "python core\\spec\\getSpec.py && shx rm -rf buildCEF && npm run build --prefix ./gui && .\\core\\pyenv\\pyenvCEF\\Scripts\\pyinstaller --clean .\\core\\spec\\windows-folder-cef.spec && shx mv .\\build\\windows-folder-cef .\\buildCEF\\windows-folder-cef",
    "alembicComments": "迁移数据库，用法: m=信息备注 npm run alembic",
    "alembic": "run-script-os",
    "alembic:macos": "cd ./core/db/ && ../pyenv/bin/alembic revision --autogenerate -m \"${m}\" && ../pyenv/bin/alembic upgrade head && ../pyenv/bin/alembic upgrade head --sql > ../../static/db/migration.sql && ../pyenv/bin/alembic current > ../../static/db/version",
    "alembic:windows": "cd ./core/db/ && ..\\pyenv\\pyenv\\Scripts\\alembic.exe revision --autogenerate -m \"${m}\" && ..\\pyenv\\pyenv\\Scripts\\alembic.exe upgrade head && ..\\pyenv\\pyenv\\Scripts\\alembic.exe upgrade head --sql > ..\\..\\static\\db\\migration.sql && ..\\pyenv\\pyenv\\Scripts\\alembic.exe current > ..\\..\\static\\db\\version"
  },
  "devDependencies": {
    "nodemon": "^2.0.20",
    "npm-run-all": "^4.1.5",
    "run-script-os": "^1.1.6",
    "shx": "^0.3.4"
  }
}